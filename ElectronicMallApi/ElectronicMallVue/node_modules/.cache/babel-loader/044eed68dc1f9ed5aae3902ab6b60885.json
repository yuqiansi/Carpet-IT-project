{"ast":null,"code":"import { __extends } from \"tslib\";\nimport * as util from './core/util.js';\nimport * as vec2 from './core/vector.js';\nimport Draggable from './mixin/Draggable.js';\nimport Eventful from './core/Eventful.js';\nimport * as eventTool from './core/event.js';\nimport { GestureMgr } from './core/GestureMgr.js';\nimport BoundingRect from './core/BoundingRect.js';\nvar SILENT = 'silent';\n\nfunction makeEventPacket(eveType, targetInfo, event) {\n  return {\n    type: eveType,\n    event: event,\n    target: targetInfo.target,\n    topTarget: targetInfo.topTarget,\n    cancelBubble: false,\n    offsetX: event.zrX,\n    offsetY: event.zrY,\n    gestureEvent: event.gestureEvent,\n    pinchX: event.pinchX,\n    pinchY: event.pinchY,\n    pinchScale: event.pinchScale,\n    wheelDelta: event.zrDelta,\n    zrByTouch: event.zrByTouch,\n    which: event.which,\n    stop: stopEvent\n  };\n}\n\nfunction stopEvent() {\n  eventTool.stop(this.event);\n}\n\nvar EmptyProxy = function (_super) {\n  __extends(EmptyProxy, _super);\n\n  function EmptyProxy() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.handler = null;\n    return _this;\n  }\n\n  EmptyProxy.prototype.dispose = function () {};\n\n  EmptyProxy.prototype.setCursor = function () {};\n\n  return EmptyProxy;\n}(Eventful);\n\nvar HoveredResult = function () {\n  function HoveredResult(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  return HoveredResult;\n}();\n\nvar handlerNames = ['click', 'dblclick', 'mousewheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu'];\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\n\nvar Handler = function (_super) {\n  __extends(Handler, _super);\n\n  function Handler(storage, painter, proxy, painterRoot, pointerSize) {\n    var _this = _super.call(this) || this;\n\n    _this._hovered = new HoveredResult(0, 0);\n    _this.storage = storage;\n    _this.painter = painter;\n    _this.painterRoot = painterRoot;\n    _this._pointerSize = pointerSize;\n    proxy = proxy || new EmptyProxy();\n    _this.proxy = null;\n\n    _this.setHandlerProxy(proxy);\n\n    _this._draggingMgr = new Draggable(_this);\n    return _this;\n  }\n\n  Handler.prototype.setHandlerProxy = function (proxy) {\n    if (this.proxy) {\n      this.proxy.dispose();\n    }\n\n    if (proxy) {\n      util.each(handlerNames, function (name) {\n        proxy.on && proxy.on(name, this[name], this);\n      }, this);\n      proxy.handler = this;\n    }\n\n    this.proxy = proxy;\n  };\n\n  Handler.prototype.mousemove = function (event) {\n    var x = event.zrX;\n    var y = event.zrY;\n    var isOutside = isOutsideBoundary(this, x, y);\n    var lastHovered = this._hovered;\n    var lastHoveredTarget = lastHovered.target;\n\n    if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n      lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n      lastHoveredTarget = lastHovered.target;\n    }\n\n    var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\n    var hoveredTarget = hovered.target;\n    var proxy = this.proxy;\n    proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\n\n    if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n      this.dispatchToElement(lastHovered, 'mouseout', event);\n    }\n\n    this.dispatchToElement(hovered, 'mousemove', event);\n\n    if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n      this.dispatchToElement(hovered, 'mouseover', event);\n    }\n  };\n\n  Handler.prototype.mouseout = function (event) {\n    var eventControl = event.zrEventControl;\n\n    if (eventControl !== 'only_globalout') {\n      this.dispatchToElement(this._hovered, 'mouseout', event);\n    }\n\n    if (eventControl !== 'no_globalout') {\n      this.trigger('globalout', {\n        type: 'globalout',\n        event: event\n      });\n    }\n  };\n\n  Handler.prototype.resize = function () {\n    this._hovered = new HoveredResult(0, 0);\n  };\n\n  Handler.prototype.dispatch = function (eventName, eventArgs) {\n    var handler = this[eventName];\n    handler && handler.call(this, eventArgs);\n  };\n\n  Handler.prototype.dispose = function () {\n    this.proxy.dispose();\n    this.storage = null;\n    this.proxy = null;\n    this.painter = null;\n  };\n\n  Handler.prototype.setCursorStyle = function (cursorStyle) {\n    var proxy = this.proxy;\n    proxy.setCursor && proxy.setCursor(cursorStyle);\n  };\n\n  Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\n    targetInfo = targetInfo || {};\n    var el = targetInfo.target;\n\n    if (el && el.silent) {\n      return;\n    }\n\n    var eventKey = 'on' + eventName;\n    var eventPacket = makeEventPacket(eventName, targetInfo, event);\n\n    while (el) {\n      el[eventKey] && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\n      el.trigger(eventName, eventPacket);\n      el = el.__hostTarget ? el.__hostTarget : el.parent;\n\n      if (eventPacket.cancelBubble) {\n        break;\n      }\n    }\n\n    if (!eventPacket.cancelBubble) {\n      this.trigger(eventName, eventPacket);\n\n      if (this.painter && this.painter.eachOtherLayer) {\n        this.painter.eachOtherLayer(function (layer) {\n          if (typeof layer[eventKey] === 'function') {\n            layer[eventKey].call(layer, eventPacket);\n          }\n\n          if (layer.trigger) {\n            layer.trigger(eventName, eventPacket);\n          }\n        });\n      }\n    }\n  };\n\n  Handler.prototype.findHover = function (x, y, exclude) {\n    var list = this.storage.getDisplayList();\n    var out = new HoveredResult(x, y);\n    setHoverTarget(list, out, x, y, exclude);\n\n    if (this._pointerSize && !out.target) {\n      var candidates = [];\n      var pointerSize = this._pointerSize;\n      var targetSizeHalf = pointerSize / 2;\n      var pointerRect = new BoundingRect(x - targetSizeHalf, y - targetSizeHalf, pointerSize, pointerSize);\n\n      for (var i = list.length - 1; i >= 0; i--) {\n        var el = list[i];\n\n        if (el !== exclude && !el.ignore && !el.ignoreCoarsePointer && (!el.parent || !el.parent.ignoreCoarsePointer)) {\n          tmpRect.copy(el.getBoundingRect());\n\n          if (el.transform) {\n            tmpRect.applyTransform(el.transform);\n          }\n\n          if (tmpRect.intersect(pointerRect)) {\n            candidates.push(el);\n          }\n        }\n      }\n\n      if (candidates.length) {\n        var rStep = 4;\n        var thetaStep = Math.PI / 12;\n        var PI2 = Math.PI * 2;\n\n        for (var r = 0; r < targetSizeHalf; r += rStep) {\n          for (var theta = 0; theta < PI2; theta += thetaStep) {\n            var x1 = x + r * Math.cos(theta);\n            var y1 = y + r * Math.sin(theta);\n            setHoverTarget(candidates, out, x1, y1, exclude);\n\n            if (out.target) {\n              return out;\n            }\n          }\n        }\n      }\n    }\n\n    return out;\n  };\n\n  Handler.prototype.processGesture = function (event, stage) {\n    if (!this._gestureMgr) {\n      this._gestureMgr = new GestureMgr();\n    }\n\n    var gestureMgr = this._gestureMgr;\n    stage === 'start' && gestureMgr.clear();\n    var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n    stage === 'end' && gestureMgr.clear();\n\n    if (gestureInfo) {\n      var type = gestureInfo.type;\n      event.gestureEvent = type;\n      var res = new HoveredResult();\n      res.target = gestureInfo.target;\n      this.dispatchToElement(res, type, gestureInfo.event);\n    }\n  };\n\n  return Handler;\n}(Eventful);\n\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n  Handler.prototype[name] = function (event) {\n    var x = event.zrX;\n    var y = event.zrY;\n    var isOutside = isOutsideBoundary(this, x, y);\n    var hovered;\n    var hoveredTarget;\n\n    if (name !== 'mouseup' || !isOutside) {\n      hovered = this.findHover(x, y);\n      hoveredTarget = hovered.target;\n    }\n\n    if (name === 'mousedown') {\n      this._downEl = hoveredTarget;\n      this._downPoint = [event.zrX, event.zrY];\n      this._upEl = hoveredTarget;\n    } else if (name === 'mouseup') {\n      this._upEl = hoveredTarget;\n    } else if (name === 'click') {\n      if (this._downEl !== this._upEl || !this._downPoint || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n        return;\n      }\n\n      this._downPoint = null;\n    }\n\n    this.dispatchToElement(hovered, name, event);\n  };\n});\n\nfunction isHover(displayable, x, y) {\n  if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n    var el = displayable;\n    var isSilent = void 0;\n    var ignoreClip = false;\n\n    while (el) {\n      if (el.ignoreClip) {\n        ignoreClip = true;\n      }\n\n      if (!ignoreClip) {\n        var clipPath = el.getClipPath();\n\n        if (clipPath && !clipPath.contain(x, y)) {\n          return false;\n        }\n\n        if (el.silent) {\n          isSilent = true;\n        }\n      }\n\n      var hostEl = el.__hostTarget;\n      el = hostEl ? hostEl : el.parent;\n    }\n\n    return isSilent ? SILENT : true;\n  }\n\n  return false;\n}\n\nfunction setHoverTarget(list, out, x, y, exclude) {\n  for (var i = list.length - 1; i >= 0; i--) {\n    var el = list[i];\n    var hoverCheckResult = void 0;\n\n    if (el !== exclude && !el.ignore && (hoverCheckResult = isHover(el, x, y))) {\n      !out.topTarget && (out.topTarget = el);\n\n      if (hoverCheckResult !== SILENT) {\n        out.target = el;\n        break;\n      }\n    }\n  }\n}\n\nfunction isOutsideBoundary(handlerInstance, x, y) {\n  var painter = handlerInstance.painter;\n  return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n}\n\nexport default Handler;","map":{"version":3,"sources":["D:/GitHub repository/Carpet-IT-project/ElectronicMallApi/ElectronicMallVue/node_modules/zrender/lib/Handler.js"],"names":["__extends","util","vec2","Draggable","Eventful","eventTool","GestureMgr","BoundingRect","SILENT","makeEventPacket","eveType","targetInfo","event","type","target","topTarget","cancelBubble","offsetX","zrX","offsetY","zrY","gestureEvent","pinchX","pinchY","pinchScale","wheelDelta","zrDelta","zrByTouch","which","stop","stopEvent","EmptyProxy","_super","_this","apply","arguments","handler","prototype","dispose","setCursor","HoveredResult","x","y","handlerNames","tmpRect","Handler","storage","painter","proxy","painterRoot","pointerSize","call","_hovered","_pointerSize","setHandlerProxy","_draggingMgr","each","name","on","mousemove","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","__zr","findHover","hovered","hoveredTarget","cursor","dispatchToElement","mouseout","eventControl","zrEventControl","trigger","resize","dispatch","eventName","eventArgs","setCursorStyle","cursorStyle","el","silent","eventKey","eventPacket","__hostTarget","parent","eachOtherLayer","layer","exclude","list","getDisplayList","out","setHoverTarget","candidates","targetSizeHalf","pointerRect","i","length","ignore","ignoreCoarsePointer","copy","getBoundingRect","transform","applyTransform","intersect","push","rStep","thetaStep","Math","PI","PI2","r","theta","x1","cos","y1","sin","processGesture","stage","_gestureMgr","gestureMgr","clear","gestureInfo","recognize","dom","res","_downEl","_downPoint","_upEl","dist","isHover","displayable","rectHover","isSilent","ignoreClip","clipPath","getClipPath","contain","hostEl","hoverCheckResult","handlerInstance","getWidth","getHeight"],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\r\nimport * as util from './core/util.js';\r\nimport * as vec2 from './core/vector.js';\r\nimport Draggable from './mixin/Draggable.js';\r\nimport Eventful from './core/Eventful.js';\r\nimport * as eventTool from './core/event.js';\r\nimport { GestureMgr } from './core/GestureMgr.js';\r\nimport BoundingRect from './core/BoundingRect.js';\r\nvar SILENT = 'silent';\r\nfunction makeEventPacket(eveType, targetInfo, event) {\r\n    return {\r\n        type: eveType,\r\n        event: event,\r\n        target: targetInfo.target,\r\n        topTarget: targetInfo.topTarget,\r\n        cancelBubble: false,\r\n        offsetX: event.zrX,\r\n        offsetY: event.zrY,\r\n        gestureEvent: event.gestureEvent,\r\n        pinchX: event.pinchX,\r\n        pinchY: event.pinchY,\r\n        pinchScale: event.pinchScale,\r\n        wheelDelta: event.zrDelta,\r\n        zrByTouch: event.zrByTouch,\r\n        which: event.which,\r\n        stop: stopEvent\r\n    };\r\n}\r\nfunction stopEvent() {\r\n    eventTool.stop(this.event);\r\n}\r\nvar EmptyProxy = (function (_super) {\r\n    __extends(EmptyProxy, _super);\r\n    function EmptyProxy() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.handler = null;\r\n        return _this;\r\n    }\r\n    EmptyProxy.prototype.dispose = function () { };\r\n    EmptyProxy.prototype.setCursor = function () { };\r\n    return EmptyProxy;\r\n}(Eventful));\r\nvar HoveredResult = (function () {\r\n    function HoveredResult(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    return HoveredResult;\r\n}());\r\nvar handlerNames = [\r\n    'click', 'dblclick', 'mousewheel', 'mouseout',\r\n    'mouseup', 'mousedown', 'mousemove', 'contextmenu'\r\n];\r\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\r\nvar Handler = (function (_super) {\r\n    __extends(Handler, _super);\r\n    function Handler(storage, painter, proxy, painterRoot, pointerSize) {\r\n        var _this = _super.call(this) || this;\r\n        _this._hovered = new HoveredResult(0, 0);\r\n        _this.storage = storage;\r\n        _this.painter = painter;\r\n        _this.painterRoot = painterRoot;\r\n        _this._pointerSize = pointerSize;\r\n        proxy = proxy || new EmptyProxy();\r\n        _this.proxy = null;\r\n        _this.setHandlerProxy(proxy);\r\n        _this._draggingMgr = new Draggable(_this);\r\n        return _this;\r\n    }\r\n    Handler.prototype.setHandlerProxy = function (proxy) {\r\n        if (this.proxy) {\r\n            this.proxy.dispose();\r\n        }\r\n        if (proxy) {\r\n            util.each(handlerNames, function (name) {\r\n                proxy.on && proxy.on(name, this[name], this);\r\n            }, this);\r\n            proxy.handler = this;\r\n        }\r\n        this.proxy = proxy;\r\n    };\r\n    Handler.prototype.mousemove = function (event) {\r\n        var x = event.zrX;\r\n        var y = event.zrY;\r\n        var isOutside = isOutsideBoundary(this, x, y);\r\n        var lastHovered = this._hovered;\r\n        var lastHoveredTarget = lastHovered.target;\r\n        if (lastHoveredTarget && !lastHoveredTarget.__zr) {\r\n            lastHovered = this.findHover(lastHovered.x, lastHovered.y);\r\n            lastHoveredTarget = lastHovered.target;\r\n        }\r\n        var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\r\n        var hoveredTarget = hovered.target;\r\n        var proxy = this.proxy;\r\n        proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\r\n        if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\r\n            this.dispatchToElement(lastHovered, 'mouseout', event);\r\n        }\r\n        this.dispatchToElement(hovered, 'mousemove', event);\r\n        if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\r\n            this.dispatchToElement(hovered, 'mouseover', event);\r\n        }\r\n    };\r\n    Handler.prototype.mouseout = function (event) {\r\n        var eventControl = event.zrEventControl;\r\n        if (eventControl !== 'only_globalout') {\r\n            this.dispatchToElement(this._hovered, 'mouseout', event);\r\n        }\r\n        if (eventControl !== 'no_globalout') {\r\n            this.trigger('globalout', { type: 'globalout', event: event });\r\n        }\r\n    };\r\n    Handler.prototype.resize = function () {\r\n        this._hovered = new HoveredResult(0, 0);\r\n    };\r\n    Handler.prototype.dispatch = function (eventName, eventArgs) {\r\n        var handler = this[eventName];\r\n        handler && handler.call(this, eventArgs);\r\n    };\r\n    Handler.prototype.dispose = function () {\r\n        this.proxy.dispose();\r\n        this.storage = null;\r\n        this.proxy = null;\r\n        this.painter = null;\r\n    };\r\n    Handler.prototype.setCursorStyle = function (cursorStyle) {\r\n        var proxy = this.proxy;\r\n        proxy.setCursor && proxy.setCursor(cursorStyle);\r\n    };\r\n    Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\r\n        targetInfo = targetInfo || {};\r\n        var el = targetInfo.target;\r\n        if (el && el.silent) {\r\n            return;\r\n        }\r\n        var eventKey = ('on' + eventName);\r\n        var eventPacket = makeEventPacket(eventName, targetInfo, event);\r\n        while (el) {\r\n            el[eventKey]\r\n                && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\r\n            el.trigger(eventName, eventPacket);\r\n            el = el.__hostTarget ? el.__hostTarget : el.parent;\r\n            if (eventPacket.cancelBubble) {\r\n                break;\r\n            }\r\n        }\r\n        if (!eventPacket.cancelBubble) {\r\n            this.trigger(eventName, eventPacket);\r\n            if (this.painter && this.painter.eachOtherLayer) {\r\n                this.painter.eachOtherLayer(function (layer) {\r\n                    if (typeof (layer[eventKey]) === 'function') {\r\n                        layer[eventKey].call(layer, eventPacket);\r\n                    }\r\n                    if (layer.trigger) {\r\n                        layer.trigger(eventName, eventPacket);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n    Handler.prototype.findHover = function (x, y, exclude) {\r\n        var list = this.storage.getDisplayList();\r\n        var out = new HoveredResult(x, y);\r\n        setHoverTarget(list, out, x, y, exclude);\r\n        if (this._pointerSize && !out.target) {\r\n            var candidates = [];\r\n            var pointerSize = this._pointerSize;\r\n            var targetSizeHalf = pointerSize / 2;\r\n            var pointerRect = new BoundingRect(x - targetSizeHalf, y - targetSizeHalf, pointerSize, pointerSize);\r\n            for (var i = list.length - 1; i >= 0; i--) {\r\n                var el = list[i];\r\n                if (el !== exclude\r\n                    && !el.ignore\r\n                    && !el.ignoreCoarsePointer\r\n                    && (!el.parent || !el.parent.ignoreCoarsePointer)) {\r\n                    tmpRect.copy(el.getBoundingRect());\r\n                    if (el.transform) {\r\n                        tmpRect.applyTransform(el.transform);\r\n                    }\r\n                    if (tmpRect.intersect(pointerRect)) {\r\n                        candidates.push(el);\r\n                    }\r\n                }\r\n            }\r\n            if (candidates.length) {\r\n                var rStep = 4;\r\n                var thetaStep = Math.PI / 12;\r\n                var PI2 = Math.PI * 2;\r\n                for (var r = 0; r < targetSizeHalf; r += rStep) {\r\n                    for (var theta = 0; theta < PI2; theta += thetaStep) {\r\n                        var x1 = x + r * Math.cos(theta);\r\n                        var y1 = y + r * Math.sin(theta);\r\n                        setHoverTarget(candidates, out, x1, y1, exclude);\r\n                        if (out.target) {\r\n                            return out;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return out;\r\n    };\r\n    Handler.prototype.processGesture = function (event, stage) {\r\n        if (!this._gestureMgr) {\r\n            this._gestureMgr = new GestureMgr();\r\n        }\r\n        var gestureMgr = this._gestureMgr;\r\n        stage === 'start' && gestureMgr.clear();\r\n        var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\r\n        stage === 'end' && gestureMgr.clear();\r\n        if (gestureInfo) {\r\n            var type = gestureInfo.type;\r\n            event.gestureEvent = type;\r\n            var res = new HoveredResult();\r\n            res.target = gestureInfo.target;\r\n            this.dispatchToElement(res, type, gestureInfo.event);\r\n        }\r\n    };\r\n    return Handler;\r\n}(Eventful));\r\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\r\n    Handler.prototype[name] = function (event) {\r\n        var x = event.zrX;\r\n        var y = event.zrY;\r\n        var isOutside = isOutsideBoundary(this, x, y);\r\n        var hovered;\r\n        var hoveredTarget;\r\n        if (name !== 'mouseup' || !isOutside) {\r\n            hovered = this.findHover(x, y);\r\n            hoveredTarget = hovered.target;\r\n        }\r\n        if (name === 'mousedown') {\r\n            this._downEl = hoveredTarget;\r\n            this._downPoint = [event.zrX, event.zrY];\r\n            this._upEl = hoveredTarget;\r\n        }\r\n        else if (name === 'mouseup') {\r\n            this._upEl = hoveredTarget;\r\n        }\r\n        else if (name === 'click') {\r\n            if (this._downEl !== this._upEl\r\n                || !this._downPoint\r\n                || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\r\n                return;\r\n            }\r\n            this._downPoint = null;\r\n        }\r\n        this.dispatchToElement(hovered, name, event);\r\n    };\r\n});\r\nfunction isHover(displayable, x, y) {\r\n    if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\r\n        var el = displayable;\r\n        var isSilent = void 0;\r\n        var ignoreClip = false;\r\n        while (el) {\r\n            if (el.ignoreClip) {\r\n                ignoreClip = true;\r\n            }\r\n            if (!ignoreClip) {\r\n                var clipPath = el.getClipPath();\r\n                if (clipPath && !clipPath.contain(x, y)) {\r\n                    return false;\r\n                }\r\n                if (el.silent) {\r\n                    isSilent = true;\r\n                }\r\n            }\r\n            var hostEl = el.__hostTarget;\r\n            el = hostEl ? hostEl : el.parent;\r\n        }\r\n        return isSilent ? SILENT : true;\r\n    }\r\n    return false;\r\n}\r\nfunction setHoverTarget(list, out, x, y, exclude) {\r\n    for (var i = list.length - 1; i >= 0; i--) {\r\n        var el = list[i];\r\n        var hoverCheckResult = void 0;\r\n        if (el !== exclude\r\n            && !el.ignore\r\n            && (hoverCheckResult = isHover(el, x, y))) {\r\n            !out.topTarget && (out.topTarget = el);\r\n            if (hoverCheckResult !== SILENT) {\r\n                out.target = el;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction isOutsideBoundary(handlerInstance, x, y) {\r\n    var painter = handlerInstance.painter;\r\n    return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\r\n}\r\nexport default Handler;\r\n"]},"metadata":{},"sourceType":"module"}